-- Script Hub UI with Execution, Draggable, and Animations
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local gui = player:WaitForChild("PlayerGui")

local function CenterFrame(frame)
    frame.Position = UDim2.new(0.5, -frame.Size.X.Offset/2, 0.5, -frame.Size.Y.Offset/2)
end

-- Main ScreenGUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ScriptHub"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = gui

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 500, 0, 600)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5) -- Important for centering
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

CenterFrame(MainFrame)

-- Add corner rounding
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 8)
UICorner.Parent = MainFrame

-- Title Bar with drag functionality
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 50)
TitleBar.Position = UDim2.new(0, 0, 0, 0)
TitleBar.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, -60, 1, 0)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "DAIZZ'S OFFICIAL SCRIPT HUB"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TitleBar

-- Credits label (moved further down)
local Credits = Instance.new("TextLabel")
Credits.Name = "Credits"
Credits.Size = UDim2.new(1, -10, 0, 20)
Credits.Position = UDim2.new(0, 10, 1, -30) -- Adjusted position
Credits.BackgroundTransparency = 1
Credits.Text = "Created by Daizz - Special thanks to script developers"
Credits.TextColor3 = Color3.fromRGB(150, 150, 150)
Credits.Font = Enum.Font.Gotham
Credits.TextSize = 12
Credits.TextXAlignment = Enum.TextXAlignment.Left
Credits.Parent = MainFrame

local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -35, 0, 10)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
CloseButton.BorderSizePixel = 0
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 16
CloseButton.Parent = TitleBar

-- Make frame draggable
local dragging
local dragInput
local dragStart
local startPos

local function update(input)
	local delta = input.Position - dragStart
	MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

TitleBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

TitleBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)

-- Close button animation
CloseButton.MouseEnter:Connect(function()
	TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(220, 80, 80)}):Play()
end)

CloseButton.MouseLeave:Connect(function()
	TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(200, 60, 60)}):Play()
end)

CloseButton.MouseButton1Click:Connect(function()
	local tween = TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In), {Size = UDim2.new(0, 0, 0, 0)})
	tween:Play()
	tween.Completed:Wait()
	ScreenGui:Destroy()
end)

-- Script Categories
local Categories = {"Admin", "Games", "Utility", "ESP", "Combat", "All"}

-- Scrollable category buttons
local CategoryButtonsContainer = Instance.new("Frame")
CategoryButtonsContainer.Name = "CategoryButtonsContainer"
CategoryButtonsContainer.Size = UDim2.new(1, -20, 0, 50) -- Increased height
CategoryButtonsContainer.Position = UDim2.new(0, 10, 0, 60)
CategoryButtonsContainer.BackgroundTransparency = 1
CategoryButtonsContainer.Parent = MainFrame

local CategoryButtons = Instance.new("ScrollingFrame")
CategoryButtons.Name = "CategoryButtons"
CategoryButtons.Size = UDim2.new(1, 0, 1, 0)
CategoryButtons.BackgroundTransparency = 1
CategoryButtons.ScrollBarThickness = 5
CategoryButtons.CanvasSize = UDim2.new(0, 0, 0, 0)
CategoryButtons.Parent = CategoryButtonsContainer

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.FillDirection = Enum.FillDirection.Horizontal
UIListLayout.Padding = UDim.new(0, 5)
UIListLayout.Parent = CategoryButtons

for i, category in ipairs(Categories) do
	local button = Instance.new("TextButton")
	button.Name = category
	button.Size = UDim2.new(0, 80, 0, 40) -- Slightly larger buttons
	button.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
	button.BorderSizePixel = 0
	button.Text = category
	button.TextColor3 = Color3.fromRGB(255, 255, 255)
	button.Font = Enum.Font.Gotham
	button.TextSize = 14
	button.Parent = CategoryButtons

	-- Add corner rounding to buttons
	local buttonCorner = Instance.new("UICorner")
	buttonCorner.CornerRadius = UDim.new(0, 6)
	buttonCorner.Parent = button

	-- Button animations
	button.MouseEnter:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(80, 80, 100)}):Play()
	end)

	button.MouseLeave:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(60, 60, 80)}):Play()
	end)

	button.MouseButton1Click:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.1), {Size = UDim2.new(0, 75, 0, 38)}):Play()
		TweenService:Create(button, TweenInfo.new(0.1), {Size = UDim2.new(0, 80, 0, 40)}):Play()
	end)
end

-- Update category buttons canvas size
CategoryButtons.CanvasSize = UDim2.new(0, (#Categories * 85) + ((#Categories - 1) * 5), 0, 0)

-- Scripts Frame (adjusted position and size)
local ScriptsFrame = Instance.new("ScrollingFrame")
ScriptsFrame.Name = "ScriptsFrame"
ScriptsFrame.Size = UDim2.new(1, -20, 1, -150) -- Adjusted for new height
ScriptsFrame.Position = UDim2.new(0, 10, 0, 120) -- Adjusted position
ScriptsFrame.BackgroundTransparency = 1
ScriptsFrame.ScrollBarThickness = 5
ScriptsFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ScriptsFrame.Parent = MainFrame

local ScriptsListLayout = Instance.new("UIListLayout")
ScriptsListLayout.Padding = UDim.new(0, 10)
ScriptsListLayout.Parent = ScriptsFrame

-- Official Scripts Database
local OfficialScripts = {
	{
		Name = "Infinite Yield",
		Category = "Admin",
		Loadstring = "loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()",
		Description = "Most popular admin commands script"
	},
	{
		Name = "Dark Dex",
		Category = "Utility",
		Loadstring = "loadstring(game:HttpGet('https://gist.githubusercontent.com/dannythehacker/1781582ab545302f2b34afc4ec53e811/raw/ee5324771f017073fc30e640323ac2a9b3bfc550/dark%2520dex%2520v4'))()",
		Description = "Advanced explorer/decompiler"
	},
	{
		Name = "SimpleSpy",
		Category = "Utility",
		Loadstring = "loadstring(game:HttpGet('https://raw.githubusercontent.com/exxtremestuffs/SimpleSpySource/master/SimpleSpy.lua'))()",
		Description = "Remote spy for debugging"
	},
	{
		Name = "CMD-X",
		Category = "Admin",
		Loadstring = "loadstring(game:HttpGet('https://raw.githubusercontent.com/CMD-X/CMD-X/master/Source'))()",
		Description = "Alternative admin commands"
	},
	{
		Name = "Hydroxide",
		Category = "Utility",
		Loadstring = "loadstring(game:HttpGet('https://raw.githubusercontent.com/Upbolt/Hydroxide/revision/UI.lua'))()",
		Description = "Advanced exploit tool"
	},
	{
		Name = "GAG Duper",
		Category = "Games",
		Loadstring = 'loadstring(game:HttpGet("https://raw.githubusercontent.com/nigapets/test/refs/heads/main/GUI%20UI", true))()',
		Description = "Duper UI for Grow a Garden"
	},
	{
		Name = "Adopt Me Duper",
		Category = "Games",
		Loadstring = "loadstring(game:HttpGet('https://raw.githubusercontent.com/Stefanuk12/ROBLOX/master/Games/Adopt%20Me/AutoFarm.lua'))()",
		Description = "Auto farm and dupe pets in Adopt Me"
	},
	{
		Name = "MM2 Duper",
		Category = "Games",
		Loadstring = "loadstring(game:HttpGet('https://raw.githubusercontent.com/NukeVsCity/ALLHACKS/main/MurderMystery2'))()",
		Description = "Duper for Murder Mystery 2"
	},
	{
		Name = "No Lag Hub",
		Category = "Games",
		Loadstring = "loadstring(game:HttpGet('https://raw.githubusercontent.com/NoLag-id/No-Lag-HUB/refs/heads/main/Loader/LoaderV1.lua'))()",
		Description = "Advanced Grow a Garden HUB"
	},
	{
		Name = "Unnamed ESP",
		Category = "ESP",
		Loadstring = "loadstring(game:HttpGet('https://raw.githubusercontent.com/ic3w0lf22/Unnamed-ESP/master/UnnamedESP.lua',true))()",
		Description = "Feature-rich ESP script"
	},
	{
		Name = "Universal Aimbot",
		Category = "ESP",
		Loadstring = "loadstring(game:HttpGet('https://raw.githubusercontent.com/Exunys/AirHub/main/AirHub.lua',true))()",
		Description = "Universal Aimbot"
	},
	{
		Name = "Vynixius",
		Category = "Combat",
		Loadstring = "loadstring(game:HttpGet('https://raw.githubusercontent.com/RegularVynixu/Vynixius/main/Loader.lua'))()",
		Description = "Combat utilities"
	}
}

-- Function to display scripts
local function DisplayScripts(category)
	-- Clear previous scripts with animation
	for _, child in ipairs(ScriptsFrame:GetChildren()) do
		if child:IsA("Frame") then
			local tween = TweenService:Create(child, TweenInfo.new(0.2), {BackgroundTransparency = 1, Size = UDim2.new(1, 0, 0, 0)})
			tween:Play()
			tween.Completed:Connect(function()
				child:Destroy()
			end)
		end
	end

	task.wait(0.2) -- Wait for fade out

	-- Add matching scripts with animation
	local count = 0
	for _, scriptData in ipairs(OfficialScripts) do
		if category == "All" or scriptData.Category == category then
			count = count + 1

			local scriptFrame = Instance.new("Frame")
			scriptFrame.Name = "ScriptFrame"
			scriptFrame.Size = UDim2.new(1, 0, 0, 0) -- Start at 0 height
			scriptFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
			scriptFrame.BorderSizePixel = 0
			scriptFrame.Parent = ScriptsFrame

			-- Add corner rounding to script frames
			local frameCorner = Instance.new("UICorner")
			frameCorner.CornerRadius = UDim.new(0, 6)
			frameCorner.Parent = scriptFrame

			local nameLabel = Instance.new("TextLabel")
			nameLabel.Name = "Name"
			nameLabel.Size = UDim2.new(1, -10, 0, 30)
			nameLabel.Position = UDim2.new(0, 10, 0, 5)
			nameLabel.BackgroundTransparency = 1
			nameLabel.Text = scriptData.Name
			nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
			nameLabel.Font = Enum.Font.GothamBold
			nameLabel.TextSize = 18
			nameLabel.TextXAlignment = Enum.TextXAlignment.Left
			nameLabel.Parent = scriptFrame

			local descLabel = Instance.new("TextLabel")
			descLabel.Name = "Description"
			descLabel.Size = UDim2.new(1, -10, 0, 30)
			descLabel.Position = UDim2.new(0, 10, 0, 35)
			descLabel.BackgroundTransparency = 1
			descLabel.Text = scriptData.Description
			descLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
			descLabel.Font = Enum.Font.Gotham
			descLabel.TextSize = 14
			descLabel.TextXAlignment = Enum.TextXAlignment.Left
			descLabel.Parent = scriptFrame

			local executeButton = Instance.new("TextButton")
			executeButton.Name = "ExecuteButton"
			executeButton.Size = UDim2.new(0, 120, 0, 30)
			executeButton.Position = UDim2.new(1, -130, 1, -35)
			executeButton.BackgroundColor3 = Color3.fromRGB(80, 120, 80)
			executeButton.BorderSizePixel = 0
			executeButton.Text = "EXECUTE SCRIPT"
			executeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
			executeButton.Font = Enum.Font.Gotham
			executeButton.TextSize = 14
			executeButton.Parent = scriptFrame

			-- Add corner rounding to execute button
			local buttonCorner = Instance.new("UICorner")
			buttonCorner.CornerRadius = UDim.new(0, 6)
			buttonCorner.Parent = executeButton

			-- Button animations
			executeButton.MouseEnter:Connect(function()
				TweenService:Create(executeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(100, 140, 100)}):Play()
			end)

			executeButton.MouseLeave:Connect(function()
				TweenService:Create(executeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(80, 120, 80)}):Play()
			end)

			executeButton.MouseButton1Down:Connect(function()
				TweenService:Create(executeButton, TweenInfo.new(0.1), {Size = UDim2.new(0, 115, 0, 28)}):Play()
			end)

			executeButton.MouseButton1Up:Connect(function()
				TweenService:Create(executeButton, TweenInfo.new(0.1), {Size = UDim2.new(0, 120, 0, 30)}):Play()
			end)

			executeButton.MouseButton1Click:Connect(function()
				executeButton.Text = "EXECUTING..."
				local success, err = pcall(function()
					loadstring(scriptData.Loadstring)()
				end)

				if success then
					executeButton.Text = "EXECUTED!"
					task.wait(1)
					executeButton.Text = "EXECUTE SCRIPT"
				else
					executeButton.Text = "ERROR!"
					warn("Script execution failed: " .. err)
					task.wait(1)
					executeButton.Text = "EXECUTE SCRIPT"
				end
			end)

			-- Animate frame in
			TweenService:Create(scriptFrame, TweenInfo.new(0.3, Enum.EasingStyle.Back), {Size = UDim2.new(1, 0, 0, 100)}):Play()
		end
	end

	-- Update canvas size
	ScriptsFrame.CanvasSize = UDim2.new(0, 0, 0, count * 110)
end

-- Connect category buttons
for _, button in ipairs(CategoryButtons:GetChildren()) do
	if button:IsA("TextButton") then
		button.MouseButton1Click:Connect(function()
			DisplayScripts(button.Name)
		end)
	end
end

MainFrame.Size = UDim2.new(0, 0, 0, 0)
CenterFrame(MainFrame) -- Ensure it starts centered even at size 0
TweenService:Create(MainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {Size = UDim2.new(0, 500, 0, 600)}):Play()

-- Show all scripts by default
task.wait(0.5) -- Wait for open animation
DisplayScripts("All")
